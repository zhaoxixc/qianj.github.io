<div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-01-04T09:35:06.000Z" title="2024/1/4 17:35:06">2024-01-04</time>发表</span><span class="level-item"><time dateTime="2024-01-04T09:50:10.353Z" title="2024/1/4 17:50:10">2024-01-04</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/qianj-up/">qianj-up</a></span><span class="level-item">6 分钟读完 (大约895个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">python相关配置</h1><div class="content"><!-- more -->
<h1 id="配置国内镜像"><a href="#配置国内镜像" class="headerlink" title="配置国内镜像"></a>配置国内镜像</h1><h2 id="pip清华源"><a href="#pip清华源" class="headerlink" title="pip清华源"></a>pip清华源</h2><p>临时</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清华源</span></span><br><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple &lt;some-package&gt;</span><br><span class="line"><span class="comment"># 阿里云源</span></span><br><span class="line">pip install -i https://mirrors.aliyun.com/pypi/simple/ &lt;some-package&gt;</span><br></pre></td></tr></table></figure>

<p>设为默认</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 升级 pip 到最新的版本 (&gt;=10.0.0) 后进行配置</span></span><br><span class="line">pip install pip -U</span><br><span class="line"><span class="comment"># 清华源</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="comment"># 阿里云源</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple/</span><br></pre></td></tr></table></figure>

<h2 id="conda清华源"><a href="#conda清华源" class="headerlink" title="conda清华源"></a>conda清华源</h2><p>参考链接 <a target="_blank" rel="noopener" href="https://mirror.tuna.tsinghua.edu.cn/help/anaconda/">https://mirror.tuna.tsinghua.edu.cn/help/anaconda/</a><br>临时</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c https://mirrors.tuna.tsinghua.edu.cn/anaconda &lt;package_name&gt;</span><br></pre></td></tr></table></figure>
<p>设为默认<br>Linux &#x2F; Windows 系统: 在<code>~/.condarc</code>中填入源。可以从下面选择北外源或者清华源。</p>
<ul>
<li><p>北外源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: <span class="literal">true</span></span><br><span class="line">channel_alias: https://mirrors.bfsu.edu.cn/anaconda</span><br><span class="line">default_channels:</span><br><span class="line">  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/main</span><br><span class="line">  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/free</span><br><span class="line">  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/r</span><br><span class="line">  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/pro</span><br><span class="line">  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/msys2</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https://mirrors.bfsu.edu.cn/anaconda/cloud</span><br><span class="line">  msys2: https://mirrors.bfsu.edu.cn/anaconda/cloud</span><br><span class="line">  bioconda: https://mirrors.bfsu.edu.cn/anaconda/cloud</span><br><span class="line">  menpo: https://mirrors.bfsu.edu.cn/anaconda/cloud</span><br><span class="line">  pytorch: https://mirrors.bfsu.edu.cn/anaconda/cloud</span><br><span class="line">  simpleitk: https://mirrors.bfsu.edu.cn/anaconda/cloud</span><br></pre></td></tr></table></figure>
</li>
<li><p>清华源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: <span class="literal">true</span></span><br><span class="line">channel_alias: https://mirrors.tuna.tsinghua.edu.cn/anaconda</span><br><span class="line">default_channels:</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h1><h2 id="conda"><a href="#conda" class="headerlink" title="conda"></a>conda</h2><p>首推的虚拟环境管理工具. 使用 conda 来安装包(而非 pip)<br>查找库的链接: <a target="_blank" rel="noopener" href="https://anaconda.org/">https://anaconda.org/</a><br>注意 conda 源的python包和pip源的python包是不通用的, 有事可以混合安装, 但容易出现依赖错误.<br>(有时候涉及到一些C++库如cuda的时候, 或者一些只在pip中存在的库需要同时用两种工具安装包的时候, 可能会出现各种奇怪的依赖错误导致环境创建失败.)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建 conda 环境</span></span><br><span class="line">conda create -n OpenCV-4.2.0-py3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活 conda 环境</span></span><br><span class="line"><span class="comment"># For linux</span></span><br><span class="line"><span class="built_in">source</span> activate OpenCV-4.2.0-py3</span><br><span class="line"><span class="comment"># For windows</span></span><br><span class="line">activate OpenCV-4.2.0-py3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在虚拟环境中安装 python 包</span></span><br><span class="line">conda install numpy</span><br><span class="line"><span class="comment"># 虚拟环境中尽量不使用pip, 除非万不得已. pip和conda安装的包的兼容性很差.</span></span><br><span class="line">pip install numpy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出虚拟环境</span></span><br><span class="line"><span class="comment"># For linux</span></span><br><span class="line"><span class="built_in">source</span> deactivate</span><br><span class="line"><span class="comment"># For windows</span></span><br><span class="line">deactivate</span><br></pre></td></tr></table></figure>

<h2 id="virtualenv"><a href="#virtualenv" class="headerlink" title="virtualenv"></a>virtualenv</h2><p>conda 安装环境不成功的第二选择.<br>virtualenv也是个python的第三方库, 用于管理虚拟环境, 但仍然使用pip来安装包.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要先在默认环境中安装该库</span></span><br><span class="line">pip install virtualenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个独立的 python 环境. 这样就在当前目录下创建了一个venv文件夹, 其中包含了一个最小的python</span></span><br><span class="line">virtualenv venv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以指定 python 版本</span></span><br><span class="line">virtualenv venv -p python3.6</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line"><span class="built_in">source</span> venv/bin/activate</span><br></pre></td></tr></table></figure>

<h1 id="环境的导出和安装"><a href="#环境的导出和安装" class="headerlink" title="环境的导出和安装"></a>环境的导出和安装</h1><h2 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导出库到文件</span></span><br><span class="line">pip freeze &gt; requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从文件中安装库</span></span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
<h2 id="conda-1"><a href="#conda-1" class="headerlink" title="conda"></a>conda</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导出库到文件</span></span><br><span class="line">conda list -e &gt; requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从文件中安装库</span></span><br><span class="line">conda install --file requirements.txt</span><br></pre></td></tr></table></figure>
<p>上面的安装方法仅限于常规安装.<br>有一些第三方channel和pip安装的库无法用此法安装, 只能导出. 为此, 我们可以选择导出整个环境.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导出环境到文件</span></span><br><span class="line">conda <span class="built_in">env</span> <span class="built_in">export</span> &gt; env.yml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从文件创建环境</span></span><br><span class="line">conda <span class="built_in">env</span> create -f env.yml</span><br></pre></td></tr></table></figure>

<h1 id="python资料"><a href="#python资料" class="headerlink" title="python资料"></a>python资料</h1><p>中文译本<br><a target="_blank" rel="noopener" href="https://python3-cookbook.readthedocs.io/zh-cn/latest/index.html">https://python3-cookbook.readthedocs.io/zh-cn/latest/index.html</a></p>
<h1 id="课程中心"><a href="#课程中心" class="headerlink" title="课程中心"></a>课程中心</h1><p><a target="_blank" rel="noopener" href="https://edu.51cto.com/lecturer/13180901.html">Qianj.51CTO</a></p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/python/">python</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/clqz1g1ed00000gyj3m2s7n7i.html"><i class="level-item fas fa-chevron-left"></i><span class="level-item">ubuntu 22.04（jammy）使用教程</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/clqyymp8j0000owyjfp8rhc7d.html"><span class="level-item">virsh命令</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!-->